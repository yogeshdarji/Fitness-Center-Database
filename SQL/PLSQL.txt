CREATE OR REPLACE PROCEDURE EQ_STATUS_CHECK (BRANCHID IN EQUIPMENT.BRANCH_ID%TYPE, EQCOND IN EQUIPMENT.E_CONDITION%TYPE) AS
BEGIN
DECLARE
B_ID EQUIPMENT.BRANCH_ID%TYPE;
E_COND EQUIPMENT.E_CONDITION%TYPE;
EQDESC EQUIPMENT%ROWTYPE;
CURSOR EQUIPMENT_DETAILS IS SELECT * FROM EQUIPMENT WHERE BRANCH_ID = BRANCHID;
BEGIN
OPEN EQUIPMENT_DETAILS;
DBMS_OUTPUT.PUT_LINE('EQUIPMENT DETAILS FOR BRANCH ' ||BRANCHID);
LOOP
FETCH EQUIPMENT_DETAILS INTO EQDESC;
EXIT WHEN (EQUIPMENT_DETAILS%NOTFOUND);
IF(EQCOND = 'ALL') THEN
DBMS_OUTPUT.PUT_LINE(' '||EQDESC.E_ID||' '||EQDESC.E_NAME||' '||EQDESC.MANUFACTURER||' '||EQDESC.CLERK_SSN);
ELSE
IF(EQCOND = EQDESC.E_CONDITION) THEN
DBMS_OUTPUT.PUT_LINE(' '||EQDESC.E_ID||' '||EQDESC.E_NAME||' '||EQDESC.MANUFACTURER||' '||EQDESC.CLERK_SSN);
END IF;
END IF;
END LOOP;
CLOSE EQUIPMENT_DETAILS;
END;
END EQ_STATUS_CHECK;

CREATE OR REPLACE PROCEDURE INCREMENT_SALARY AS
BEGIN
DECLARE
THISEMP TRAINER%ROWTYPE;
CURSOR C IS
SELECT * FROM TRAINER
FOR UPDATE;
BEGIN
OPEN C;
LOOP
FETCH C INTO THISEMP;
EXIT WHEN C%NOTFOUND;
UPDATE TRAINER SET HOURLY_SALARY=THISEMP.HOURLY_SALARY +
0.20*THISEMP.HOURLY_SALARY WHERE CURRENT OF C;
END LOOP;
CLOSE C;
END;
END INCREMENT_SALARY;

CREATE OR REPLACE PROCEDURE BT_STATUS_CHECK (BID IN CUSTOMER.BATCH_ID%TYPE,COUNTS OUT NUMBER)
AS
BEGIN
BEGIN
SELECT COUNT(*) INTO COUNTS FROM CUSTOMER WHERE BATCH_ID= BID;
END;
END BT_STATUS_CHECK;

CREATE OR REPLACE PROCEDURE EQ_PERSON_HEALTH_CHECK (CUSTID IN CUSTOMER.C_ID%TYPE)AS
BEGIN
DECLARE
FAT_P CUSTOMER_REPORT.FAT_PERCENTAGE%TYPE;
CURSOR REPORT_DETAILS IS SELECT FAT_PERCENTAGE FROM CUSTOMER_REPORT WHERE C_ID = CUSTID;
BEGIN
OPEN REPORT_DETAILS;
LOOP
FETCH REPORT_DETAILS INTO FAT_P;
EXIT WHEN (REPORT_DETAILS%NOTFOUND);
IF FAT_P < 15 THEN
DBMS_OUTPUT.PUT_LINE('HEALTHY');
ELSE
DBMS_OUTPUT.PUT_LINE('NOT HEALTHY');
END IF;
END LOOP;
CLOSE REPORT_DETAILS;
END;
END EQ_PERSON_HEALTH_CHECK;